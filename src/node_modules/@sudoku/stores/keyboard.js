import { cursor } from './cursor';
import { gamePaused } from './game';
import { grid, userGrid } from './grid';
import { notes } from './notes';
import { derived } from 'svelte/store';
import {SUDOKU_SIZE } from '../constants.js';

export const keyboardDisabled = derived(
	[cursor, grid, gamePaused],
	([$cursor, $grid, $gamePaused]) => {
		return ($cursor.x === null && $cursor.y === null) || $grid[$cursor.y][$cursor.x] !== 0 || $gamePaused;
	},
	false,
);

export const keyDisabled = derived(
    [userGrid,notes],
    ([$userGrid,$notes]) => {
        return Array.from(Array(10), (e,i) =>  !$notes && $userGrid.flat().filter(x => x === i).length >= SUDOKU_SIZE);
    },
    false,
);